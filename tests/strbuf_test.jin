fn extern "c" printf(fmt: *u8, ..) -> i32

fn main() = {
	let mut b = StrBuf.new()
	print_str(&b)

	b.push("Hello")
	print_str(&b)

	b.push(" ")
	print_str(&b)

	b.push("World")
	print_str(&b)

	b.clear()
	print_str(&b)

	b.push('👍')
	b.push(' ')
	b.push('👍')
	print_str(&b)

	let s = b.as_ref()
	let mut i = 0
	for if i < s.len {
		unsafe printf("%x ".ptr, s[i])
		i += 1
	}
	unsafe printf("\n".ptr)
}

fn print_str(b: &StrBuf) =
	unsafe printf("str is: '%s'\n".ptr, b.as_ref().ptr)
