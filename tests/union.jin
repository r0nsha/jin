fn extern "c" printf(fmt: *U8, ..) -> I32

type Box(value: Int)

fn main() = {
	# Value constructors
	let a = Option.some(1)
	let b = Option[Int].some(1)
	let c = Option.some(value: 2)
	let d: Option[Int] = Option.none

	# Pattern matching
	let value = Option.some(1)
	match &value {
		Option.some(1) -> unsafe printf("some(1)\n".ptr)
		Option.some(_) -> unsafe printf("some(other)\n".ptr)
		Option.none() -> unsafe printf("none\n".ptr)
	}

	let o = Option.some(Box(4))

	let mut b = Box(1)
	unsafe printf("before match: Box(%d)\n".ptr, b.value)

	match o {
		Option.some(Box(value: 5)) -> unsafe printf("some(Box(5))\n".ptr)
		Option.some(x) -> {
			unsafe printf("some(%d)\n".ptr, x.value)
			b = x
		}
		Option.none -> unsafe printf("none\n".ptr)
	}

	unsafe printf("after match: Box(%d)\n".ptr, b.value)

	if Option.some(-1).map_or(false, is_negative) {
		unsafe printf("o is negative\n".ptr)
	} else {
		unsafe printf("o is not negative\n".ptr)
	}
}

fn is_negative(x: Int) -> Bool = x < 0
