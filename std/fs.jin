import std.(
    c.(c-int, fopen),
    io
)

// TODO: Use lower-level `open` C api with flags
// TODO: Add an API for custom file opening with `OpenOptions`
fn open*(path: &str) -> io.Result[File] = {
    let pathname = unsafe as[_](path.as-bytes().ptr)
    let mode = unsafe as[_]("rw".ptr)
    let fd = unsafe fopen(pathname, mode)
    println("{fd}")
    Result.Ok(File(fd))
}

type RawFd = c-int
type File*(fd: RawFd)
